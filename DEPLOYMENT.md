# ⚙️ Deployment Guide (배포 절차 가이드)

본 문서는 [프로젝트명]의 **수동 배포 절차**를 정의하며, 서버의 안전한 중지 및 파일 교체를 위한 가이드라인을 제공합니다.

---

## 1. 빌드 절차 (Build Procedure)

프로젝트 코드가 수정될 때마다 다음 Gradle 명령어를 사용하여 최신 JAR 파일을 생성해야 합니다.

| 단계 | 목적 (Goal) | 실행 명령어 (팀원 실행) |
| :--- | :--- | :--- |
| **빌드 실행** | 이전 빌드 결과물 정리 및 새 JAR 파일 생성 | `./gradlew :back:clean :back:build` |
| **결과물 위치** | 생성된 JAR 파일은 일반적으로 `build/libs/` 디렉토리에 위치합니다. | `back-0.0.1-SNAPSHOT.jar` |

---

## 2. 배포 절차 (Standard Deployment Steps)

서버에 최신 버전을 적용하기 위해 다음 단계를 반드시 순서대로 실행해야 합니다.

### Step 1: 기존 프로세스 ID (PID) 확인 및 정상 종료 시도

실행 중인 서버의 PID를 찾아 안전하게 종료를 시도하여 포트 충돌을 방지합니다.

| 단계                | 목적 (Goal) | 실행 명령어 (팀원 실행) |
|:------------------| :--- | :--- |
| **1-A. PID 확인**   | 실행 중인 서버 프로세스 ID를 찾습니다. | `ps -ef | grep 'back-0.0.1-SNAPSHOT.jar' | grep -v grep` |
| **1-B. 정상 종료 시도** | 위 결과로 나온 PID를 입력하여 종료를 시도합니다. | `kill [PID]` |

### Step 2: 프로세스 강제 종료 (선택 사항)

Step 1에서 서버가 종료되지 않았거나, 응답이 없을 경우 강제로 프로세스를 종료합니다.

| 단계 | 목적 (Goal) | 실행 명령어 (팀원 실행) |
| :--- | :--- | :--- |
| **2-A. PID 재확인** | 프로세스가 정말 남아있는지 다시 확인합니다. | `ps -ef | grep 'back-0.0.1-SNAPSHOT' | grep -v grep` |
| **2-B. 강제 종료** | PID를 입력하여 즉시 종료합니다. | `kill -9 [PID]` |

### Step 3: 새 JAR 파일 업로드

최신 빌드된 JAR 파일로 서버의 기존 파일을 교체합니다.

| 단계 | 목적 (Goal) | 실행 명령어 (팀원 실행)                                         |
| :--- | :--- |:-------------------------------------------------------|
| **파일 교체** | 로컬에서 빌드된 최신 JAR 파일을 서버에 업로드하고 기존 파일을 덮어씁니다. | `/home/t25306/v0.5src/web/backend`에 *FileZilla로 파일 전송* |

### Step 4: 서버 실행 (User Action)

| 단계 | 목적 (Goal) | 실행 명령어 (팀원 실행) |
| :--- | :--- | :--- |
| **서버 재실행** | 서버를 재실행하여 서비스를 재개합니다. | `java -jar back-0.0.1-SNAPSHOT.jar` |

---

## 3. 향후 개선 계획 (Future Improvements)

현재 수동 배포 절차를 향후 클라우드 환경(AWS EC2, GCP VM 등) 이전 시, **GitHub Actions**와 SSH Key를 연동하여 `main` 브랜치에 코드가 푸시될 때마다 자동으로 빌드 및 배포가 완료되는 **CI/CD 파이프라인을 구축할 예정입니다.**